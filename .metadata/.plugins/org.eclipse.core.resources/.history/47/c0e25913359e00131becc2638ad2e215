/*
 * HiScoreAcivity
 * retrieves the hiscores from the hiScoreServer & shows them on screen
 */

package nl.mprog.evilspacemonsterhangman;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.util.JsonReader;
import android.util.Log;

public class HiScoreActivity extends Activity {
	
	public void onCreate() {
		HttpURLConnection urlConnection;

		
		try {
			URL url = new URL("http://localhost:3000/hiscores.json");
			urlConnection = (HttpURLConnection) url.openConnection();
		
		    InputStream in = new BufferedInputStream(urlConnection.getInputStream());
		    

		}catch(Exception e) {
			e.printStackTrace();
		}
	}
		
	public List readJsonStream(InputStream in) throws IOException {
		JsonReader reader = new JsonReader(new InputStreamReader(in, "UTF-8"));
	    try {
	    	return readHiScoreArray(reader);
	    }finally {
	    	reader.close();
	    }
	}
	
     public List readHiScoreArray(JsonReader reader) throws IOException {
    	 List<HiScore> hiScoreList = new ArrayList<HiScore>();
		 reader.beginArray();
		 while (reader.hasNext()) {
			 hiScoreList.add(new HiScore(reader));
		 }
		 reader.endArray();
		 return hiScoreList;
   }
}
